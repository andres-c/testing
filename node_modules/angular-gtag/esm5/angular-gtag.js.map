{
  "version": 3,
  "file": "angular-gtag.js",
  "sources": [
    "ng://angular-gtag/out/src/gtag.module.ts",
    "ng://angular-gtag/out/src/gtag-event.directive.ts",
    "ng://angular-gtag/out/src/gtag.service.ts"
  ],
  "sourcesContent": [
    "import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Gtag } from './gtag.service';\nimport { GtagEventDirective } from './gtag-event.directive';\n\nimport { RouterModule } from '@angular/router';\nimport { GtagConfig } from './interfaces';\n\n@NgModule({\n  declarations: [GtagEventDirective],\n  exports: [GtagEventDirective]\n})\nexport class GtagModule {\n  public static forRoot(config: GtagConfig): ModuleWithProviders {\n    return {\n      ngModule: GtagModule,\n      providers: [Gtag, { provide: 'config', useValue: config }]\n    };\n  }\n}\n",
    "import {\n  Directive,\n  HostListener,\n  Renderer2,\n  Input,\n  AfterViewInit,\n  ElementRef\n} from '@angular/core';\nimport { Gtag } from './gtag.service';\n\n@Directive({\n  selector: '[gtagEvent]'\n})\nexport class GtagEventDirective implements AfterViewInit {\n  @Input() trackOn: string;\n  @Input() action: string;\n  @Input() category: string;\n  @Input() params: any;\n\n  constructor(\n    private gtag: Gtag,\n    private renderer: Renderer2,\n    private el: ElementRef\n  ) {}\n\n  ngAfterViewInit() {\n    try {\n      this.renderer.listen(this.el.nativeElement, this.trackOn, () => {\n        this.gtag.event(this.action || this.trackOn, {\n          event_category: this.category,\n          ...this.params\n        });\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n",
    "import { Injectable, Inject } from '@angular/core';\nimport { GtagPageview, GtagEvent, GtagConfig } from './interfaces';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { tap, filter } from 'rxjs/operators';\ndeclare var gtag: any;\n\n@Injectable()\nexport class Gtag {\n  private mergedConfig: GtagConfig;\n  constructor(@Inject('config') gaConfig: GtagConfig, private router: Router) {\n    this.mergedConfig = { trackPageviews: true, ...gaConfig };\n    if (this.mergedConfig.trackPageviews) {\n      router.events\n        .pipe(\n          filter(event => event instanceof NavigationEnd),\n          tap(event => {\n            this.pageview();\n          })\n        )\n        .subscribe();\n    }\n  }\n\n  event(action: string, params: GtagEvent = {}) {\n    // try/catch to avoid cross-platform issues\n    try {\n      gtag('event', action, params);\n      this.debug('event', this.mergedConfig.trackingId, action, params);\n    } catch (err) {\n      console.error('Google Analytics event error', err);\n    }\n  }\n\n  pageview(params?: GtagPageview) {\n    try {\n      const defaults = {\n        page_path: this.router.url,\n        page_title: 'Angular App',\n        page_location: window.location.href\n      };\n\n      params = { ...defaults, ...params };\n      gtag('config', this.mergedConfig.trackingId, params);\n      this.debug('pageview', this.mergedConfig.trackingId, params);\n    } catch (err) {\n      console.error('Google Analytics pageview error', err);\n    }\n  }\n\n  config(params: any) {\n    try {\n      gtag('config', this.mergedConfig.trackingId, (params = {}));\n    } catch (err) {\n      console.error('Google Analytics config error', err);\n    }\n  }\n\n  private debug(...msg) {\n    if (this.mergedConfig.debug) {\n      console.log('angular-gtag:', ...msg);\n    }\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
